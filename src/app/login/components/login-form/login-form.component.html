<div class="align">
  <div class="grid">
    <div class="login-box">
      <nz-card>
        <nz-tabset nzSize="small">
          <nz-tab [nzTitle]="loginTemplate">
            <ng-template #loginTemplate>
              <i nz-icon nzType="user" nzTheme="outline"></i>
              Iniciar sesión
            </ng-template>
            <!-- PLANTILLA LOGIN FORM -->
            <ng-container *ngTemplateOutlet="templateLoginForm"></ng-container>
            <!-- // PLANTILLA LOGIN FORM -->
          </nz-tab>
          <nz-tab [nzTitle]="registerTemplate">
            <ng-template #registerTemplate>
              <i nz-icon nzType="info-circle" nzTheme="outline"></i>
              ¡Quiero registrarme!
            </ng-template>

            <!-- PLANTILLA REGISTER FORM -->
            <ng-container
              *ngTemplateOutlet="templateRegisterForm"
            ></ng-container>
            <!-- // PLANTILLA REGISTER FORM -->
          </nz-tab>
        </nz-tabset>
      </nz-card>
    </div>
  </div>
</div>

<ng-template #templateLoginForm>
  <form
    class="form-box"
    nzLayout="vertical"
    nz-form
    [formGroup]="loginUserForm"
    (ngSubmit)="submitLoginForm()"
  >
    <!-- CORREO -->
    <nz-form-item class="mt-3">
      <nz-form-control nzHasFeedback [nzErrorTip]="emailVal">
        <nz-input-group
          [nzSuffix]="suffixTemplateInfo"
          [nzPrefix]="prefixTemplateUser"
        >
          <input
            nz-input
            id="email"
            formControlName="email"
            placeholder="Escribe tu correo..."
          />

          <ng-template #emailVal let-control>
            <ng-container *ngIf="control.hasError('email')"
              >Debe ser un correo válido.
            </ng-container>
            <ng-container *ngIf="control.hasError('maxlength')"
              >El correo es muy largo.
            </ng-container>
            <ng-container *ngIf="control.hasError('required')"
              >El correo es requerido.</ng-container
            >
          </ng-template>
        </nz-input-group>
        <ng-template #prefixTemplateUser
          ><i nz-icon nzType="user"></i
        ></ng-template>
        <ng-template #suffixTemplateInfo
          ><i
            nz-icon
            nz-tooltip
            nzTooltipTitle="Tu correo electrónico"
            nzType="info-circle"
          ></i
        ></ng-template>
      </nz-form-control>
    </nz-form-item>
    <!-- // CORREO -->
    <!-- CONTRASEÑA -->
    <nz-form-control [nzErrorTip]="passwordVal">
      <nz-input-group
        [nzPrefix]="prefixTemplateUser"
        [nzSuffix]="suffixTemplate"
      >
        <input
          [type]="passwordVisible ? 'text' : 'password'"
          nz-input
          id="password"
          formControlName="password"
          placeholder="Escribe tu contraseña..."
        />

        <ng-template #passwordVal let-control>
          <ng-container *ngIf="control.hasError('minlength')"
            >La contraseña debe ser mínimo 6 caracteres.
          </ng-container>
          <ng-container *ngIf="control.hasError('required')"
            >La contraseña es requerida.</ng-container
          >
        </ng-template>
      </nz-input-group>
      <ng-template #prefixTemplateUser
        ><i nz-icon nzType="user"></i
      ></ng-template>
      <ng-template #suffixTemplate>
        <i
          nz-icon
          [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
          (click)="passwordVisible = !passwordVisible"
        ></i>
      </ng-template>
    </nz-form-control>
    <!-- // CONTRASEÑA -->
    <!-- BOTON ENVIO -->
    <div
      class="text-center"
      nz-col
      nzSpan="24"
      style="margin: 0 auto; margin-top: 1rem"
    >
      <button
        nz-button
        nzType="primary"
        nzSize="large"
        type="submit"
        [nzLoading]="showLoading"
      >
        <i nz-icon nzType="login" nzTheme="outline"></i> Iniciar sesión
      </button>
    </div>
    <!-- // BOTON ENVIO -->
  </form>
</ng-template>

<ng-template #templateRegisterForm>
  <form
    class="form-box"
    nzLayout="vertical"
    nz-form
    [formGroup]="registerUserForm"
    (ngSubmit)="submitRegisterForm()"
  >
    <!-- CORREO -->
    <nz-form-item class="mt-3">
      <nz-form-control nzHasFeedback [nzErrorTip]="emailVal">
        <nz-input-group
          [nzSuffix]="suffixTemplateInfo"
          [nzPrefix]="prefixTemplateUser"
        >
          <input
            nz-input
            id="email"
            formControlName="email"
            placeholder="Escribe tu correo..."
          />

          <ng-template #emailVal let-control>
            <ng-container *ngIf="control.hasError('email')"
              >Debe ser un correo válido.
            </ng-container>
            <ng-container *ngIf="control.hasError('maxlength')"
              >El correo es muy largo.
            </ng-container>
            <ng-container *ngIf="control.hasError('required')"
              >El correo es requerido.</ng-container
            >
          </ng-template>
        </nz-input-group>
        <ng-template #prefixTemplateUser
          ><i nz-icon nzType="user"></i
        ></ng-template>
        <ng-template #suffixTemplateInfo
          ><i
            nz-icon
            nz-tooltip
            nzTooltipTitle="Tu correo electrónico"
            nzType="info-circle"
          ></i
        ></ng-template>
      </nz-form-control>
    </nz-form-item>
    <!-- // CORREO -->
    <!-- CONTRASEÑA -->
    <nz-form-control [nzErrorTip]="passwordVal">
      <nz-input-group
        [nzPrefix]="prefixTemplateUser"
        [nzSuffix]="suffixTemplate"
      >
        <input
          [type]="passwordVisible ? 'text' : 'password'"
          nz-input
          id="password"
          formControlName="password"
          placeholder="Escribe tu contraseña..."
        />

        <ng-template #passwordVal let-control>
          <ng-container *ngIf="control.hasError('minlength')"
            >La contraseña debe ser mínimo 6 caracteres.
          </ng-container>
          <ng-container *ngIf="control.hasError('required')"
            >La contraseña es requerida.</ng-container
          >
        </ng-template>
      </nz-input-group>
      <ng-template #prefixTemplateUser
        ><i nz-icon nzType="user"></i
      ></ng-template>
      <ng-template #suffixTemplate>
        <i
          nz-icon
          [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
          (click)="passwordVisible = !passwordVisible"
        ></i>
      </ng-template>
    </nz-form-control>
    <!-- // CONTRASEÑA -->
    <!-- BOTON ENVIO -->
    <div
      class="text-center"
      nz-col
      nzSpan="24"
      style="margin: 0 auto; margin-top: 1rem"
    >
      <button
        nz-button
        nzType="primary"
        nzSize="large"
        type="submit"
        [nzLoading]="showLoading"
      >
        <i nz-icon nzType="login" nzTheme="outline"></i> Iniciar sesión
      </button>
    </div>
    <!-- // BOTON ENVIO -->
  </form>
</ng-template>
